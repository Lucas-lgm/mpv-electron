# 简化方案：透明窗口同步

## 当前问题

从图片和日志看：
- ✅ MPV 已经启动并播放视频
- ❌ 视频仍在独立窗口中，没有嵌入
- ❌ 获取 contentView 超时（编译 Objective-C 太慢）

## 问题分析

1. **获取 contentView 超时**：编译 Objective-C 过程需要时间，可能导致超时
2. **MPV 使用独立窗口**：即使传入了 `--wid` 参数，MPV 可能仍然创建独立窗口
3. **技术复杂度高**：需要编译原生代码，增加了复杂度

## 推荐方案：透明窗口同步（方案 C）

既然嵌入方案遇到技术障碍，我们可以采用**更简单、更可靠的方案**：

### 原理
1. **MPV 窗口**：保持原生窗口，视频性能最佳
2. **Electron 窗口**：设为透明，只显示控制面板 overlay
3. **窗口同步**：两个窗口位置和大小同步，看起来像一体

### 优点
- ✅ 不需要获取 NSView/NSWindow 指针
- ✅ 不需要编译 Objective-C
- ✅ MPV 使用原生窗口，性能最好
- ✅ 实现简单，可靠性高
- ✅ 你的控制面板代码可以直接使用

### 实现步骤

1. **Electron 窗口设为透明**：
   ```typescript
   transparent: true,
   frame: false, // 或者保持 frame，但设置背景透明
   ```

2. **控制面板保持不透明**：
   - CSS 中设置 `background: rgba(0, 0, 0, 0.95)`

3. **获取 MPV 窗口并同步位置**：
   - 通过窗口标题或进程 PID 找到 MPV 窗口
   - 监听 Electron 窗口的 `move` 和 `resize` 事件
   - 同步更新 MPV 窗口的位置和大小

4. **MPV 窗口在 Electron 窗口下方**：
   - Electron 窗口层级在上方（显示控制面板）
   - MPV 窗口在下方（显示视频）

## 实现代码

让我为你实现这个方案。
