# 问题分析：为什么窗口句柄传递了但 MPV 不嵌入

## 核心问题

**macOS 进程间窗口嵌入限制**：
- macOS 不允许跨进程嵌入窗口
- `--wid` 参数只能在使用 `libmpv` 的**同一进程**内工作
- 从命令行启动的 MPV 进程无法嵌入到 Electron 窗口

## 当前情况

你的代码：
1. ✅ 窗口句柄已正确获取：`1340055788736`
2. ✅ 窗口句柄已传递给 MPV：`--wid=1340055788736`
3. ❌ 但 MPV 仍然创建独立窗口（因为进程隔离）

## 为什么不行？

```
Electron 进程 (Node.js)
    ↓
spawn('mpv', ['--wid=...'])  ← 这是另一个进程！
    ↓
MPV 进程（独立进程，无法访问 Electron 窗口）
    ↓
macOS 阻止跨进程窗口嵌入
```

## 解决方案

### 方案 1：使用 libmpv（真正的嵌入）⭐

在 Electron 主进程中直接使用 libmpv C 库：
- ✅ 同一进程，可以嵌入窗口
- ❌ 需要编写 C++ addon，复杂度高

### 方案 2：透明窗口同步（推荐）⭐⭐⭐⭐⭐

- Electron 窗口透明，只显示控制面板
- MPV 使用原生窗口（性能最好）
- 两个窗口位置和大小同步
- ✅ 不需要 C++ 代码，实现简单

### 方案 3：接受两个窗口（当前状态）

- MPV 独立窗口播放视频
- Electron 窗口显示控制面板
- ❌ 用户体验不好

## 我的建议

采用**方案 2（透明窗口同步）**，这是最实用的方案。

需要我实现吗？
