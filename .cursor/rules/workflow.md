# 标准工作流程

> **版本**: 1.5.0  
> **最后更新**: 2026-01-26

## 📋 标准工作流程

### 阶段 1：需求理解（Understand）
- 仔细阅读用户需求
- 理解业务目标和上下文
- 识别相关文件和模块

### 阶段 2：代码分析（Analyze）
- 使用 @文件名 引用相关代码
- **搜索现有代码，避免重复实现**
- **识别无用代码、文档、脚本**
- 分析现有架构和模式
- 识别依赖关系和影响范围
- 识别可复用的代码模块

### 阶段 3：规划制定（Plan）
必须包含以下内容：
1. **文件清单**：列出所有需要创建/修改的文件
2. **架构设计**：说明如何融入现有架构
3. **实现步骤**：分步骤详细说明
4. **风险评估**：潜在问题和注意事项
5. **测试方案**：如何验证功能

### 阶段 4：等待确认（Wait）
- 明确说明"等待确认"
- 不要直接修改代码
- 可以回答关于计划的提问

### 阶段 5：执行实现（Implement）
- 只有在用户明确确认后才执行
- 严格按照计划实施
- 保持代码风格一致
- **代码/架构变更完成后，当即更新 `docs/ARCHITECTURE.md`（含架构图、分层图、接口、IPC 等），不等待用户提醒**

## 🔄 规划模板结构

每次规划必须包含：

### 1. 需求分析
- 用户目标是什么
- 涉及哪些功能模块

### 2. 影响范围
- 需要修改的文件（main/preload/renderer/native）
- 是否需要新增文件
- 对现有功能的影响

### 3. 实现方案
- 数据流设计
- 组件/模块设计
- IPC 通信设计（如果涉及）
- 状态管理设计

### 4. 实现步骤
- 步骤 1：xxx
- 步骤 2：xxx
- ...

### 5. 注意事项
- Electron 进程边界
- HDR/EDR 相关影响
- 性能考虑
- 内存管理

### 6. 测试方案
- 功能测试点
- 边界情况
- 建议的测试命令
